/*!
 * jQuery TinyValidate plugin v1.6.3
 *
 * Date: Tue Dec 18 11:20:54 2012 EST
 * Requires: jQuery v1.4+
 *
 * Copyright 2011, Karl Swedberg
 * Dual licensed under the MIT and GPL licenses (just like jQuery):
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * A (relatively) tiny validation plugin
 *
 *
*/
(function(a){function b(k){if(/(input|textarea|select)/i.test(k))return"inputs";else if(/(div|fieldset|p)/i.test(k))return"containers"}function o(k){for(var n in k)if(k.hasOwnProperty(n))return false;return true}function v(){window.console&&window.console.log&&console.log.apply(console,arguments)}function C(k,n){return k.replace(/\{([^\|]+)\|([^}]+)\}/g,function(q,s,h){return n*1===1?s:h})}var D=document.createElement("input");a.each(["required","pattern"],function(k,n){a.support[n]=n in D});a.tinyvalidate=
{version:"1.6.3",callCounter:-1,maxnum:0,rules:{}};var r={};r.inputs={};r.containers={};a.fn.tinyvalidate=function(k){a.tinyvalidate.callCounter++;var n=a.tinyvalidate.callCounter?"_"+a.tinyvalidate.callCounter:"",q=a.tinyvalidate.rules;if(o(q))return v("you must have at least one rule. see jquery.tinyvalidate.rules.js","alert");this.find("*[required]").addClass("required").prop({required:false});return this.each(function(s){var h=a(this),l=a([]),i=a.extend(true,{},a.fn.tinyvalidate.defaults,k||{},
a.metadata?h.metadata():a.meta?h.data():{}),w=[],p=0,g=i.summary,t=g&&a(g.wrapper).hide(),m=i.inline,E=typeof i.otherEvents==="string"?i.otherEvents.split(/\s*,\s*/):i.otherEvents||[];n+=s?"-"+s:"";if(k==="removeErrors"){a.each(q,function(c,d){h.find("."+d.ruleClass).each(function(){l=l.add(a(this))})});l.removeData("error").trigger("removeNotice").trigger("toggleErrorClass");h.trigger("hideSummary");return this}if(g){a(g.insertTo==="form"?h[0]:g.insertTo)[g.insertType](t);if(g.lineItems)var u=g.lineItems.wrapper.match(/[^>]+>/g),
F=u[1]+u[0],y=g.lineItems.errorElement?g.lineItems.errorElement.match(/[^>]+>/g):["",""]}a.each(q,function(c,d){var e="."+d.ruleClass;h.find(e).each(function(){var f=b(this.nodeName)||"inputs",j=a(this),z=j.data("rule")||[],x=q[c],A=this.pattern;if(A)x=a.extend({},x,{rule:function(G){return RegExp(A).test(G)},text:"Field value is invalid."});if(!(this.nodeName==="DIV"&&j.has(e).length)){z.push(x);j.data("rule",z).data("ruleName",c).data("elementType",f);l=l.add(j);m&&j.data("insertion",r[f][m.insertType])}})});
if(m){m.errorElement&&l.bind("addNotice",function(c,d){var e=a(this),f=a.isFunction(e.data("rule")[d].text)?e.data("rule")[d].text.call(this,"inline",e):e.data("rule")[d].text,j=a(m.errorElement);j.html(f);j[a(this).data("insertion")](this).hide();j[m.errorAnimate.effect](m.errorAnimate.speed);e.bind("removeNotice",function(){j.remove()})});l.bind("toggleErrorClass",function(){var c,d=a(this);c=(c=d.is("select")&&d.closest("div.select"))&&c.length?c:d.find('input[type="checkbox"], input[type="radio"]').length?
d:d.closest(m.containerTag);d.data("error")?c.addClass(m.containerErrorClass):c.removeClass(m.containerErrorClass)})}if(g){h.bind("displaySummary",function(c,d){t.hide();if(d){var e=g.preMessage.replace(/\{num\}/g,d);e=C(e,d);e=g.lineItems?e+u[0]+w.join(F)+u[1]+g.postMessage:e+g.postMessage;t.html(e)[g.messageAnimate.effect](g.messageAnimate.speed)}});h.bind("hideSummary",function(){t.hide()});g.lineItems&&h.bind("lineItemBuilder",function(c,d,e){c=a(d);var f=a("<div></div>").html(c.data("elementType")===
"containers"?c.children().eq(0).html():c.prev().clone().html());f.children().remove();f=f.text().replace(/[\*:\s]+$/,"");e=a.isFunction(e.text)?e.text.call(this):e.text;if(g.lineItems.linkify)f='<a href="#'+(c.data("elementType")==="containers"?c.find("input")[0].id:d.id)+'">'+f+"</a>";w.push(f+" "+y[0]+e+y[1])})}l.bind("validate.tv",function(){var c=a(this).trigger("removeNotice"),d=c.data("rule"),e=d.length;c.removeData("error");for(var f=0;f<e;f++){d[f].elem&&d[f].elem(c);var j=d[f].check==="element"?
c:c.val();if(!d[f].rule(j)&&(!i.ignoreHidden||!c.is(":hidden"))&&(!i.ignoreDisabled||!this.disabled))if(!(c.is(".required")&&d[f].ruleClass!=="required"&&!c.val())){c.data("error","true").trigger("addNotice",[f]);h.trigger("lineItemBuilder",[this,d[f]]);p++}}c.trigger("toggleErrorClass")});h.bind("submit.tv",function(){p=0;w=[];l.trigger("validate.tv");h.trigger("displaySummary",[p]);if(p){i.submitError.call(h[0],p);return false}else if(i.submitOverride){h.tinyvalidate("removeErrors");i.submitOverride.call(h[0],
i);return false}});a.each(E,function(c,d){l.bind(d+".tv",function(e){var f=[9,16,17,18,91];if(!(e.type==="click"&&!/^(?:radio|checkbox)$/i.test(e.target.type)))if(!(e.type.indexOf("key")===0&&a.inArray(e.which,f)>-1)){p=0;a(this).trigger("validate.tv",[e]);i.onEvents.call(this,h)}})})})};a.fn.tinyvalidate.defaults={ignoreDisabled:true,ignoreHidden:true,otherEvents:"blur",onEvents:a.noop,submitError:function(){},submitOverride:null};a.fn.tinyvalidate.defaults.inline={insertType:"after",errorElement:'<div class="error-message"></div>',
errorAnimate:{effect:"fadeIn",speed:400},containerTag:"div",containerErrorClass:"error"};a.fn.tinyvalidate.defaults.summary={insertTo:"form",insertType:"append",wrapper:'<div class="error-summary"></div>',preMessage:"Please review the {num} highlighted {field|fields} and try again.<ul>",postMessage:"</ul>",messageAnimate:{effect:"fadeIn",speed:400},lineItems:{wrapper:"<li></li>",errorElement:'<span class="error-message"></span>',linkify:true}};var B={after:"insertAfter",insertAfter:"insertAfter",
before:"insertBefore",insertBefore:"insertBefore"};a.extend(r.inputs,B,{append:"insertAfter",appendTo:"insertAfter",prepend:"insertBefore",prependTo:"insertBefore"});a.extend(r.containers,B,{append:"appendTo",appendTo:"appendTo",prepend:"prependTo",prependTo:"prependTo"})})(jQuery);
(function(a){a.tinyvalidate.rules.required={ruleClass:"required",rule:function(b){return/\S+/.test(b)},text:"This field is required"};a.tinyvalidate.rules.email={ruleClass:"email",rule:function(b){return/^\S+[@]\w+(\.[a-zA-Z0-9]{2,4}){1,4}/.test(b)||b==""},text:"Invalid Email Format",check:"value"};a.tinyvalidate.rules.url={ruleClass:"url",rule:function(b){return/^(?:https?:\/\/)?.+\.\w{2,5}/.test(b)||b==""},text:"Invalid URL Format",check:"value"};a.tinyvalidate.rules.zip={ruleClass:"zip",rule:function(b){return/^\d{5}(-\d{4})?$/.test(b)||
b==""},text:"Invalid Zip Code Format",check:"value"};a.tinyvalidate.rules.date={ruleClass:"date",rule:function(b){return/(0\d|1[0-2])\/([0-2]\d|3[0-1])\/[1-2]\d{3}/.test(b)||b==""},text:"Invalid Date Format",check:"value"};a.tinyvalidate.rules.phone={ruleClass:"phone",rule:function(b){return/\(?\d{3}\)?[\. -]?\d{3}[\. -]?\d{4}/.test(b)||b==""},text:"Invalid Format ",check:"value"};a.tinyvalidate.rules.ssn={ruleClass:"ssn",rule:function(b){return/\d{3}-\d{2}-\d{4}/.test(b)||b==""},text:"Invalid Format (xxx-xx-xxxx)",
check:"value"};a.tinyvalidate.rules.currency={ruleClass:"currency",rule:function(b){return/^\d+(\.\d\d)?$/.test(b)||b==""},text:"Invalid Currency Format",check:"value"};a.tinyvalidate.rules.requiredradio={ruleClass:"choose-one",rule:function(b){if(b.constructor==Object)return b.find("input:checked").length},text:"At least one option is required",check:"element"};a.tinyvalidate.rules.maxradio={ruleClass:"max",rule:function(b){a.tinyvalidate.maxnum=b[0].className.replace(/.*max-(\d+).*/,"$1");return b.find("input:checked").length<=
+a.tinyvalidate.maxnum},text:function(){return"No more than "+this.className.replace(/.*max-(\d+).*/,"$1")+" options may be selected"},check:"element"};a.tinyvalidate.rules.equals={ruleClass:"equals",rule:function(b){var o="";a(b).closest("form").find('[name="'+b[0].name+'"]').each(function(v){if(v&&this.value!==o)return o=false;o=this.value});return!o?false:true},text:"Values must match",check:"element"}})(jQuery);
