/*!
 * jQuery TinyValidate plugin v1.4
 *
 * Date: Tue Feb 01 14:01:30 2011 EST
 * Requires: jQuery v1.3+
 *
 * Copyright 2010, Karl Swedberg
 * Dual licensed under the MIT and GPL licenses (just like jQuery):
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * A (relatively) tiny validation plugin
 *
 *
*/
(function(a){function c(n){for(var p in n)if(n.hasOwnProperty(p))return false;return true}function o(){window.console&&window.console.log&&console.log.apply(console,arguments)}function v(n,p){return n.replace(/\{([^\|]+)\|([^}]+)\}/g,function(q,m,h){return p*1==1?m:h})}a.tinyvalidate={version:"1.4",callCounter:-1,maxnum:0,rules:{}};var r={};r.inputs={};r.containers={};a.fn.tinyvalidate=function(n){a.tinyvalidate.callCounter++;var p=a.tinyvalidate.callCounter?"_"+a.tinyvalidate.callCounter:"",q=a.tinyvalidate.rules;
if(c(q))return o("you must have at least one rule. see jquery.tinyvalidate.rules.js","alert");return this.each(function(m){var h=a(this),j=a([]);p+=m?"-"+m:"";var l=a.extend(true,{},a.fn.tinyvalidate.defaults,n||{},a.metadata?h.metadata():a.meta?h.data():{}),w=[],s=0,k=l.inline;if(n=="removeErrors"){a.each(q,function(b,d){a("."+d.ruleClass,h).each(function(){j=j.add(a(this))})});j.removeData("error").trigger("removeNotice").trigger("toggleErrorClass");h.trigger("hideSummary");return this}if(l.summary){var g=
l.summary,t=a(g.wrapper).hide();a(g.insertTo=="form"?h[0]:g.insertTo)[g.insertType](t);if(g.lineItems)var u=g.lineItems.wrapper.match(/[^>]+>/g),A=u[1]+u[0],x=g.lineItems.errorElement?g.lineItems.errorElement.match(/[^>]+>/g):["",""]}a.each(q,function(b,d){a("."+d.ruleClass,h).each(function(){var e=a(this),f=e.data("rule")||[];f.push(q[b]);var i;var y=this.nodeName;if(/(input|textarea|select)/i.test(y))i="inputs";else if(/(div|fieldset|p)/i.test(y))i="containers";i=i||"inputs";e.data("rule",f).data("ruleName",
b).data("elementType",i);j=j.add(e);k&&e.data("insertion",r[i][k.insertType])})});if(k){k.errorElement&&j.bind("addNotice",function(b,d){var e=a(this),f=a.isFunction(e.data("rule")[d].text)?e.data("rule")[d].text.call(this):e.data("rule")[d].text,i=a(k.errorElement);i.html(f);i[a(this).data("insertion")](this).hide();i[k.errorAnimate.effect](k.errorAnimate.speed);e.bind("removeNotice",function(){i.remove()})});j.bind("toggleErrorClass",function(){var b=a(this),d=b.find('input[type="checkbox"], input[type="radio"]').length?
b:b.closest(k.containerTag);b.data("error")?d.addClass(k.containerErrorClass):d.removeClass(k.containerErrorClass)})}if(g){h.bind("displaySummary",function(b,d){t.hide();if(d){var e=g.preMessage.replace(/\{num\}/g,d);e=v(e,d);e=g.lineItems?e+u[0]+w.join(A)+u[1]+g.postMessage:e+g.postMessage;t.html(e)[g.messageAnimate.effect](g.messageAnimate.speed)}});h.bind("hideSummary",function(){t.hide()});g.lineItems&&h.bind("lineItemBuilder",function(b,d,e){b=a(d);var f=a("<div></div>").html(b.data("elementType")==
"containers"?b.children(":first").html():b.prev().clone().html());f.children().remove();f=f.text().replace(/[\*:\s]+$/,"");e=a.isFunction(e.text)?e.text.call(this):e.text;if(g.lineItems.linkify)f='<a href="#'+(b.data("elementType")=="containers"?b.find("input")[0].id:d.id)+'">'+f+"</a>";w.push(f+" "+x[0]+e+x[1])})}j.bind("validate",function(){var b=a(this).trigger("removeNotice"),d=b.data("rule"),e=d.length;b.removeData("error");for(var f=0;f<e;f++){d[f].elem&&d[f].elem(b);var i=d[f].check=="element"?
b:b.val();if(!d[f].rule(i)&&!b.is(":hidden"))if(!(b.is(".required")&&d[f].ruleClass!="required"&&!b.val())){b.data("error","true").trigger("addNotice",[f]);h.trigger("lineItemBuilder",[this,d[f]]);s++}}b.trigger("toggleErrorClass")});h.bind("submit.tv",function(){s=0;w=[];j.trigger("validate");h.trigger("displaySummary",[s]);if(s)return false;else if(l.submitOverride){h.tinyvalidate("removeErrors");l.submitOverride.call(h[0],l);return false}});if(l.otherEvents){if(typeof l.otherEvents=="string")var z=
l.otherEvents.split(/\s*,\s*/);for(m=z.length-1;m>=0;m--)j.bind(z[m]+".tv",function(b){b.type=="click"&&!/^(?:radio|checkbox)$/i.test(b.target.type)||a(this).trigger("validate")})}})};a.fn.tinyvalidate.defaults={otherEvents:"blur",submitOverride:null};a.fn.tinyvalidate.defaults.inline={insertType:"after",errorElement:'<div class="error-message"></div>',errorAnimate:{effect:"fadeIn",speed:400},containerTag:"div",containerErrorClass:"error"};a.fn.tinyvalidate.defaults.summary={insertTo:"form",insertType:"append",
wrapper:'<div class="error-summary"></div>',preMessage:"Please review the {num} highlighted {field|fields} and try again.<ul>",postMessage:"</ul>",messageAnimate:{effect:"fadeIn",speed:400},lineItems:{wrapper:"<li></li>",errorElement:'<span class="error-message"></span>',linkify:true}};a.extend(r.inputs,{append:"insertAfter",appendTo:"insertAfter",after:"insertAfter",insertAfter:"insertAfter",prepend:"insertBefore",prependTo:"insertBefore",before:"insertBefore",insertBefore:"insertBefore"});a.extend(r.containers,
{append:"appendTo",appendTo:"appendTo",after:"appendTo",insertAfter:"appendTo",prepend:"prependTo",prependTo:"prependTo",before:"insertBefore",insertBefore:"insertBefore"})})(jQuery);
(function(a){a.tinyvalidate.rules.required={ruleClass:"required",rule:function(c){return/\S+/.test(c)},text:"This field is required"};a.tinyvalidate.rules.email={ruleClass:"email",rule:function(c){return/^\S+[@]\w+(\.[a-zA-Z0-9]{2,4}){1,4}/.test(c)||c==""},text:"Invalid Email Format",check:"value"};a.tinyvalidate.rules.url={ruleClass:"url",rule:function(c){return/^http(s?)\/\/:/.test(c)},text:"Invalid URL Format",check:"value"};a.tinyvalidate.rules.zip={ruleClass:"zip",rule:function(c){return/^\d{5}(-\d{4})?$/.test(c)},
text:"Invalid Zip Code Format",check:"value"};a.tinyvalidate.rules.date={ruleClass:"date",rule:function(c){return/(0\d|1[0-2])\/([0-2]\d|3[0-1])\/[1-2]\d{3}/.test(c)},text:"Invalid Date Format",check:"value"};a.tinyvalidate.rules.phone={ruleClass:"phone",rule:function(c){return/\(?\d{3}\)?[\. -]?\d{3}[\. -]?\d{4}/.test(c)||c==""},text:"Invalid Format ",check:"value"};a.tinyvalidate.rules.ssn={ruleClass:"ssn",rule:function(c){return/\d{3}-\d{2}-\d{4}/.test(c)},text:"Invalid Format (xxx-xx-xxxx)",check:"value"};
a.tinyvalidate.rules.currency={ruleClass:"currency",rule:function(c){return/^\d+(\.\d\d)?$/.test(c)||c==""},text:"Invalid Currency Format",check:"value"};a.tinyvalidate.rules.requiredradio={ruleClass:"choose-one",rule:function(c){if(c.constructor==Object)return c.find(":checked").length},text:"At least one option is required",check:"element"};a.tinyvalidate.rules.maxradio={ruleClass:"max",rule:function(c){a.tinyvalidate.maxnum=c[0].className.replace(/.*max-(\d+).*/,"$1");return c.find("input:checked").length<=
+a.tinyvalidate.maxnum},text:function(){return"No more than "+this.className.replace(/.*max-(\d+).*/,"$1")+" options may be selected"},check:"element"};a.tinyvalidate.rules.equals={ruleClass:"equals",rule:function(c){var o=false;a(c).closest("form").find('[name="'+c[0].name+'"]').each(function(v){if(v&&this.value!==o)return o=false;o=this.value});return o===false?false:true},text:"These fields must match",check:"element"}})(jQuery);
